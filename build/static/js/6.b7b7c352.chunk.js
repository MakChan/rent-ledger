(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{450:function(e,a,t){"use strict";t.r(a);var n=t(156),r=t(34),l=t(11),o=t(0),i=t.n(o),u=t(150),c=t(70),s=t(61),m=t(154),d=t(151),b=t(453),f=t(452),p=t(454),g=t(227),E=t.n(g),v=t(26),O=t(22),j=t(21),y=t(75),h=t(43);function P(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function w(){var e=Object(l.a)(["\n  mutation addTenant($lease: LeaseInput!, $tenant: TenantInput!) {\n    createTenantWithLease(lease: $lease, tenant: $tenant) {\n      _id\n      rent\n      room\n    }\n  }\n"]);return w=function(){return e},e}var C=Object(O.b)(w());a.default=function(){var e=Object(j.b)().userState,a=Object(v.c)(y.b,{variables:{landlordId:e.user.landlord._id}}),t=a.data,l=a.loading,o=Object(v.b)(C,{onCompleted:function(e){console.log("data",e)},update:function(e,a){var t=a.data.addTenant,r=e.readQuery({query:y.b}).rooms;console.log("rooms ==>",r),console.log("addTenant ==>",t),r=r.map(function(e){return t.room==e._id?function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?P(t,!0).forEach(function(a){Object(n.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}({},e,{currentLease:t}):e}),e.writeQuery({query:y.b,data:{rooms:r}})}}),g=Object(r.a)(o,2),O=g[0],w=g[1].data;if(l)return i.a.createElement(h.a,{size:"large"});var R=t.rooms.filter(function(e){return!e.currentLease}).map(function(e){return{label:e.roomNo,value:e._id}});if(0===R.length)return i.a.createElement("h4",{style:{textAlign:"center",marginTop:"2rem"}},"No vacant rooms.");var V=new Date;return w?i.a.createElement(h.b,null,i.a.createElement(E.a,{size:"xlarge",primaryColor:"green"}),i.a.createElement("div",null,"Saved")):i.a.createElement("div",{style:{padding:"1rem 2rem"}},i.a.createElement("h3",null,"Add Tenant"),i.a.createElement(c.c,{onSubmit:function(e){var a=Object.assign({},e.lease);a.room=e.lease.room.value,a.date=new Date(e.lease.date?e.lease.date:e["lease.date"]),a.rent=a.rent&&parseInt(a.rent),a.extraCharges=a.extraCharges&&parseInt(a.extraCharges),a.initialReading=a.initialReading&&parseInt(a.initialReading),O({variables:{lease:a,tenant:e.tenant}})}},function(e){var a=e.formProps,t=e.submitting;return i.a.createElement("form",a,i.a.createElement(s.b,{name:"lease.room",label:"Room",isRequired:!0,defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(b.a,Object.assign({},a,{options:R,placeholder:"Choose a room"}))}),i.a.createElement(s.b,{name:"tenant.name",label:"Name",isRequired:!0,defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(d.a,Object.assign({autoComplete:"off"},a))}),i.a.createElement(s.b,{name:"tenant.phoneNumber",label:"Phone Number",defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(d.a,Object.assign({autoComplete:"off"},a,{type:"number"}))}),i.a.createElement(s.b,{name:"tenant.aadharNumber",label:"Aadhar Number",defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(d.a,Object.assign({autoComplete:"off"},a,{type:"number"}))}),i.a.createElement(s.b,{name:"lease.rent",label:"Rent",defaultValue:void 0},function(e){var a=e.fieldProps;return i.a.createElement(d.a,Object.assign({autoComplete:"off"},a,{type:"number"}))}),i.a.createElement(s.b,{name:"lease.initialReading",label:"Reading",defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(d.a,Object.assign({autoComplete:"off"},a,{type:"number"}))}),i.a.createElement(s.b,{name:"lease.date",label:"Date",defaultValue:V},function(e){var a=e.fieldProps;return i.a.createElement(f.a,a)}),i.a.createElement(s.b,{name:"lease.extraCharges",label:"Extra Charges",defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(d.a,Object.assign({autoComplete:"off"},a,{type:"number"}))}),i.a.createElement(s.b,{name:"lease.remark",label:"Remarks",defaultValue:""},function(e){var a=e.fieldProps;return i.a.createElement(p.a,Object.assign({resize:"smart"},a))}),i.a.createElement(m.a,null,i.a.createElement(u.a,{type:"submit",appearance:"primary",disabled:t,isLoading:t},"Submit")))}))}}}]);
//# sourceMappingURL=6.b7b7c352.chunk.js.map